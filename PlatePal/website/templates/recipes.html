{% extends "base.html" %}

{% block title %}Recipes{% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='recipes.css') }}">

    <h1>Recipes</h1>
        <form action="{{ url_for('views.filter') }}" method="GET">
            <div>
                <label for="search">Search by recipe name:</label>
                <input type="text" id="search" name="search" placeholder="Enter recipe name" value="{{ search_query }}">
            </div>
            <div>
                <label for="ingredient_search">Search by ingredient name:</label>
                <input type="text" id="ingredient_search" name="ingredient_search" placeholder="Enter ingredient name" value="{{ ingredient_search_query }}">
            </div>
            <div>
                <input type="checkbox" id="vegan" name="tags" value="Vegan" {% if 'Vegan' in tags %}checked{% endif %}>
                <label for="vegan">Vegan</label>
            </div>
            <div>
                <input type="checkbox" id="vegetarian" name="tags" value="Vegetarian" {% if 'Vegetarian' in tags %}checked{% endif %}>
                <label for="vegetarian">Vegetarian</label>
            </div>
            <div>
                <input type="checkbox" id="keto" name="tags" value="Keto" {% if 'Keto' in tags %}checked{% endif %}>
                <label for="keto">Keto</label>
            </div>
            <div>
                <input type="checkbox" id="kosher" name="tags" value="Kosher" {% if 'Kosher' in tags %}checked{% endif %}>
                <label for="kosher">Kosher</label>
            </div>
            <div>
                <input type="checkbox" id="dairy_free" name="tags" value="Dairy Free" {% if 'Dairy Free' in tags %}checked{% endif %}>
                <label for="dairy_free">Dairy Free</label>
            </div>
            <button type="submit">Submit</button>
        </form>
        
    <ul>
        {% for recipe in recipes %}
            {% if search and search.lower() in recipe.tags %}
                <li><a href="{{ url_for('views.recipe', recipe_id=recipe.id) }}">{{ recipe.title }}</a></li>
            {% elif not search %}
                <li><a href="{{ url_for('views.recipe', recipe_id=recipe.id) }}">{{ recipe.title }}</a></li>
            {% endif %}
        {% endfor %}
    </ul>
{% endblock %}
